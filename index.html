<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>0616發佈會邀請函</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 40px;
    }
    .button {
      display: inline-block;
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #FF95CA;
      color: white;
      text-decoration: none;
      border-radius: 5px;
    }
    input {
      width: 90%;
      padding: 10px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <div id="content">
    <h3>正在檢查開啟方式⋯</h3>
  </div>

  <script>
    const isInLINEApp = navigator.userAgent.toLowerCase().includes("line");

    if (!isInLINEApp) {
      // 使用者不是從 LINE 打開，立即顯示提示
      document.getElementById("content").innerHTML = `
        <h3>⚠️ 邀請函將透過 Line官方 發送💌</h3>
        <a class="button" href="https://line.me/R/ti/p/@opl8696k">📲 加入 LINE官方</a>
      `;
    } else {
      // LINE App 環境，開始初始化 LIFF
      liff.init({ liffId: "2007537866-487VenaX" })
        .then(() => {
          document.getElementById("content").innerHTML = `<h3>正在透過 LINE官方 傳送邀請函給你⋯</h3>`;
          liff.sendMessages([
            {
              type: 'text',
              text: '0616發佈會邀請函'
            }
          ]).then(() => {
            liff.closeWindow();
          }).catch((err) => {
            console.error('Send message error:', err);
            document.getElementById("content").innerHTML = "<h3>發送失敗，請稍後再試 🙏</h3>";
          });
        })
        .catch((err) => {
          console.error('LIFF init error:', err);
          document.getElementById("content").innerHTML = "<h3>LIFF 初始化失敗，請確認設定</h3>";
        });
    }
  </script>
</body>
</html>
